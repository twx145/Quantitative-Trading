/* ==========================================================================
   Quantitive-Trading Theme - ENTERPRISE VERSION
   ========================================================================== */

/* --- 1. CSS变量定义 --- */
.root {
    -fx-theme-base-bg: #f4f5f7;
    -fx-theme-control-bg: #ffffff;
    -fx-theme-text-primary: #2c3e50;
    -fx-theme-text-secondary: #7f8c8d;
    -fx-theme-text-on-accent: #ffffff;
    -fx-theme-accent: #3498db;
    -fx-theme-accent-hover: #2980b9;
    -fx-theme-border: #dcdfe6;
    -fx-theme-chart-grid: #ecf0f1;
    -fx-theme-scrollbar-thumb: #bdc3c7;
    -fx-theme-scrollbar-thumb-hover: #95a5a6;

    -fx-theme-price-color: #3498db;
    -fx-theme-positive-color: #26a69a;
    -fx-theme-negative-color: #ef5350;
    -fx-theme-ma-short-color: #ffa726;
    -fx-theme-ma-long-color: #ab47bc;
    -fx-theme-macd-color: #29b6f6;
    -fx-theme-macd-signal-color: #ff7043;
    -fx-theme-rsi-color: #66bb6a;
    -fx-theme-bb-upper-lower-color: #78909c;
    -fx-theme-bb-middle-color: #ffca28;
}

.theme-dark {
    -fx-theme-base-bg: #233140;
    -fx-theme-control-bg: #2c3e50;
    -fx-theme-text-primary: #ecf0f1;
    -fx-theme-text-secondary: #95a5a6;
    -fx-theme-accent: #3498db;
    -fx-theme-accent-hover: #4aa3df;
    -fx-theme-border: #3e5166;
    -fx-theme-chart-grid: #3e5166;
    -fx-theme-scrollbar-thumb: #566573;
    -fx-theme-scrollbar-thumb-hover: #7F8C8D;
}


/* ★★★ 全局与窗口样式 ★★★ */
.body {
    -fx-background-color: -fx-theme-base-bg;
    /* ★ 核心：为窗口添加圆角 (这个继续保留) */
    -fx-background-radius: 10px;

    /* ★ 性能优化 3: 注释掉或删除下面这行代价极高的阴影效果 */
    /* -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.2), 20, 0, 0, 5); */

    -fx-font-family: "Microsoft YaHei UI", sans-serif;
    -fx-font-size: 13px;

    /* ★ 优化：添加一个细微的边框来替代阴影，增加层次感 */
    -fx-border-color: rgba(0, 0, 0, 0.1);
    -fx-border-width: 1px;
    -fx-border-radius: 10px;
}
/* ★ 暗色模式下边框的优化 */
.theme-dark .body {
    -fx-border-color: rgba(0, 0, 0, 0.4);
}
/* 子容器设为透明，以显示body的背景 */
.vbox, .hbox, .grid-pane, .split-pane, .split-pane > .split-pane-divider {
    -fx-background-color: transparent;
}


/* ★★★ 自定义标题栏样式 ★★★ */
.custom-title-bar {
    /* 只给顶部设置圆角，与窗口保持一致 */
    -fx-background-radius: 10px 10px 0 0;
    -fx-background-color: derive(-fx-theme-base-bg, -2%); /* 比背景色稍深一点，增加层次感 */
    -fx-border-color: -fx-theme-border;
    -fx-border-width: 0 0 1px 0;
}
.theme-dark .custom-title-bar {
    -fx-background-color: derive(-fx-theme-base-bg, 5%);
}
.window-title {
    -fx-font-size: 14px;
    -fx-font-weight: bold;
    -fx-text-fill: -fx-theme-text-primary;
}
.window-buttons-container {
    -fx-padding: 0 5px 0 0;
}

/* ★★★ 窗口控制按钮 (SVG) ★★★ */
.window-button {
    -fx-background-color: transparent;
    -fx-background-radius: 5px;
    -fx-min-width: 45px;
    -fx-min-height: 30px;
    -fx-padding: 5px;
    -fx-cursor: hand;
    -fx-alignment: center;
}
.window-button:hover {
    -fx-background-color: rgba(127, 140, 141, 0.2);
}
.window-close-button:hover {
    -fx-background-color: #e74c3c;
}
.theme-dark .window-button:hover {
    -fx-background-color: rgba(236, 240, 241, 0.15);
}
.theme-dark .window-close-button:hover {
    -fx-background-color: #c0392b;
}

/* SVG 图标样式 */
.window-button .svg-path {
    -fx-stroke: -fx-theme-text-secondary;
    -fx-stroke-width: 1.5;
}
.window-button:hover .svg-path {
    -fx-stroke: -fx-theme-text-primary;
}
.window-close-button:hover .svg-path {
    -fx-stroke: white;
}
.theme-dark .window-button:hover .svg-path {
    -fx-stroke: -fx-theme-text-primary;
}
.theme-dark .window-close-button:hover .svg-path {
    -fx-stroke: white;
}

/* 主题切换按钮 */
.theme-toggle-button, .theme-toggle-button:selected {
    -fx-background-color: transparent;
    -fx-text-fill: -fx-theme-text-secondary;
    -fx-font-size: 16px;
    -fx-padding: 6px 12px;
    -fx-background-radius: 5px;
    -fx-cursor: hand;
}
.theme-toggle-button:hover {
    -fx-background-color: rgba(127, 140, 141, 0.2);
}
.theme-dark .theme-toggle-button:hover {
    -fx-background-color: rgba(236, 240, 241, 0.15);
}


/* ========================================================================
   ★★★ 以下是你项目原有的所有控件和图表样式，无需修改 ★★★
   ======================================================================== */

/* --- 控件样式 --- */
.label { -fx-text-fill: -fx-theme-text-primary; }
.button, .toggle-button { -fx-background-color: -fx-theme-accent; -fx-text-fill: -fx-theme-text-on-accent; -fx-font-weight: bold; -fx-background-radius: 4px; -fx-padding: 6px 12px; }
.button:hover, .toggle-button:hover { -fx-background-color: -fx-theme-accent-hover; -fx-cursor: hand; }
.toggle-button:selected { -fx-background-color: -fx-theme-accent-hover; }

.text-field, .combo-box, .date-picker, .text-area { -fx-background-color: -fx-theme-control-bg; -fx-text-fill: -fx-theme-text-primary; -fx-border-color: -fx-theme-border; -fx-border-width: 1px; -fx-border-radius: 4px; -fx-background-radius: 4px; }
.text-field:focused, .combo-box:focused, .date-picker:focused, .text-area:focused { -fx-border-color: -fx-theme-accent; }
.date-picker > .text-field { -fx-background-color: -fx-theme-control-bg; }
.text-area .content { -fx-background-color: -fx-theme-control-bg; }

.check-box .box { -fx-background-color: -fx-theme-control-bg; -fx-border-color: -fx-theme-border; -fx-border-radius: 3px; }
.check-box:selected .mark { -fx-background-color: -fx-theme-accent; }
.check-box { -fx-text-fill: -fx-theme-text-primary; }

.separator .line { -fx-border-color: -fx-theme-border; -fx-border-width: 1 0 0 0; }
.titled-pane { -fx-border-color: -fx-theme-border; }
.titled-pane > .title { -fx-background-color: -fx-theme-base-bg; }
.titled-pane > .title > .text { -fx-fill: -fx-theme-text-primary; }
.titled-pane > .content { -fx-background-color: -fx-theme-base-bg; -fx-border-color: transparent; }

/* --- ComboBox 和 DatePicker 弹出窗口样式 --- */
.combo-box-popup .list-view { -fx-background-color: -fx-theme-control-bg; -fx-border-color: -fx-theme-border; }
.combo-box-popup .list-view .list-cell { -fx-background-color: -fx-theme-control-bg; -fx-text-fill: -fx-theme-text-primary; }
.combo-box-popup .list-view .list-cell:hover { -fx-background-color: -fx-theme-accent; -fx-text-fill: -fx-theme-text-on-accent; }
.date-picker-popup { -fx-background-color: -fx-theme-control-bg; -fx-border-color: -fx-theme-border; }
.date-picker-popup .month-year-pane { -fx-background-color: -fx-theme-base-bg; }
.date-picker-popup .day-cell { -fx-background-color: -fx-theme-control-bg; -fx-text-fill: -fx-theme-text-primary; }
.date-picker-popup .day-cell:hover { -fx-background-color: -fx-theme-accent-hover; -fx-text-fill: -fx-theme-text-on-accent; }
.date-picker-popup .day-cell.today { -fx-border-color: -fx-theme-accent; }
.date-picker-popup .spinner .label { -fx-text-fill: -fx-theme-text-primary; }

/* --- TableView 和 ScrollBar 样式 --- */
.table-view { -fx-background-color: -fx-theme-control-bg; -fx-border-color: -fx-theme-border; }
.table-view .column-header-background { -fx-background-color: -fx-theme-base-bg; }
.table-view .column-header, .table-view .filler { -fx-background-color: -fx-theme-base-bg; -fx-border-color: transparent -fx-theme-border -fx-theme-border transparent; }
.table-view .column-header .label { -fx-text-fill: -fx-theme-text-primary; -fx-font-weight: bold; }
.table-view .table-cell { -fx-text-fill: -fx-theme-text-primary; -fx-border-color: transparent; -fx-padding: 8px; }
.table-view .table-row-cell { -fx-background-color: -fx-theme-control-bg; }
.table-view .table-row-cell:odd { -fx-background-color: -fx-theme-base-bg; }
.table-view .table-row-cell:hover { -fx-background-color: -fx-theme-accent; }
.table-view .table-row-cell:hover .table-cell { -fx-text-fill: -fx-theme-text-on-accent; }

.scroll-bar:vertical, .scroll-bar:horizontal { -fx-background-color: transparent; }
.scroll-bar .thumb { -fx-background-color: -fx-theme-scrollbar-thumb; -fx-background-radius: 8px; }
.scroll-bar .thumb:hover { -fx-background-color: -fx-theme-scrollbar-thumb-hover; }
.scroll-bar .increment-button, .scroll-bar .decrement-button { -fx-padding: 0; -fx-background-color: transparent; }
.scroll-bar .increment-arrow, .scroll-bar .decrement-arrow { -fx-shape: ""; -fx-padding: 0; }

/* --- Chart Styles --- */
.chart { -fx-background-color: -fx-theme-control-bg; -fx-padding: 5px; }
.chart-plot-background { -fx-background-color: -fx-theme-control-bg; }
.chart-title { -fx-text-fill: -fx-theme-text-primary; -fx-font-size: 1.2em; }
.axis-label { -fx-text-fill: -fx-theme-text-primary; }
.axis { -fx-tick-label-fill: -fx-theme-text-secondary; }
.chart-vertical-grid-lines, .chart-horizontal-grid-lines { -fx-stroke: -fx-theme-chart-grid; }
.chart-legend { -fx-background-color: -fx-theme-control-bg; }
.chart-legend .label { -fx-text-fill: -fx-theme-text-primary; }
.chart-series-line { -fx-stroke-width: 1.5px; }

/* Indicator line colors */
.default-color0.chart-series-line { -fx-stroke: -fx-theme-price-color; }
.default-color1.chart-series-line { -fx-stroke: -fx-theme-ma-short-color; }
.default-color2.chart-series-line { -fx-stroke: -fx-theme-ma-long-color; }
.default-color3.chart-series-line { -fx-stroke: -fx-theme-macd-color; }
.default-color4.chart-series-line { -fx-stroke: -fx-theme-macd-signal-color; }
.default-color5.chart-series-line { -fx-stroke: -fx-theme-rsi-color; }
.default-color6.chart-series-line { -fx-stroke: -fx-theme-bb-upper-lower-color; -fx-stroke-dash-array: 4 4;}
.default-color7.chart-series-line { -fx-stroke: -fx-theme-bb-middle-color; }
.default-color8.chart-series-line { -fx-stroke: -fx-theme-bb-upper-lower-color; -fx-stroke-dash-array: 4 4;}

/* ★ 1. Hide default symbols (circles) for ALL series. Our custom nodes won't be affected. */
.chart-line-symbol { -fx-background-color: transparent, transparent; -fx-padding: 5px; }

/* ★ 2. Define the style for our custom signal symbols (triangles). */
.chart-line-symbol.buy-signal-symbol {
    -fx-shape: "M5,0 L10,10 L0,10 Z"; /* Upward triangle */
    -fx-background-color: -fx-theme-positive-color;
    -fx-padding: 7px;
    -fx-background-insets: 0;
}
.chart-line-symbol.sell-signal-symbol {
    -fx-shape: "M0,0 L10,0 L5,10 Z"; /* Downward triangle */
    -fx-background-color: -fx-theme-negative-color;
    -fx-padding: 7px;
    -fx-background-insets: 0;
}

/* ★ 3. Define the style for the line that connects the trade signals. */
.trade-signal-series.chart-series-line {
    -fx-stroke: #7f8c8d; /* A neutral gray color */
    -fx-stroke-width: 1px;
    -fx-stroke-dash-array: 3 5; /* A dashed line style to make it less prominent */
}